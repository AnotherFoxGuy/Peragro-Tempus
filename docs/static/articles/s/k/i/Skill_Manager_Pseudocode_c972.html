<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/favicon.ico"/>
    <title>Skill Manager/Pseudocode - Peragro Tempus Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../raw/MediaWiki%7ECommon.css";
@import "../../../../raw/MediaWiki%7EMonobook.css";
@import "../../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="page-Skill_Manager_Pseudocode">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Skill Manager/Pseudocode</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Peragro Tempus Wiki</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Harvesting_Skill"><span class="tocnumber">1</span> <span class="toctext">Harvesting Skill</span></a>
<ul>
<li class="toclevel-2"><a href="#Server"><span class="tocnumber">1.1</span> <span class="toctext">Server</span></a></li>
<li class="toclevel-2"><a href="#Client"><span class="tocnumber">1.2</span> <span class="toctext">Client</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Mana_Shield"><span class="tocnumber">2</span> <span class="toctext">Mana Shield</span></a>
<ul>
<li class="toclevel-2"><a href="#Server_2"><span class="tocnumber">2.1</span> <span class="toctext">Server</span></a></li>
<li class="toclevel-2"><a href="#Client_2"><span class="tocnumber">2.2</span> <span class="toctext">Client</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Combat_Hit"><span class="tocnumber">3</span> <span class="toctext">Combat Hit</span></a>
<ul>
<li class="toclevel-2"><a href="#Server_3"><span class="tocnumber">3.1</span> <span class="toctext">Server</span></a></li>
<li class="toclevel-2"><a href="#Client_3"><span class="tocnumber">3.2</span> <span class="toctext">Client</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Harvesting_Skill"></a><h1> <span class="mw-headline"> Harvesting Skill </span></h1>
<p>Pseudo code for harvesting skill.
</p>
<a name="Server"></a><h2> <span class="mw-headline"> Server </span></h2>
<pre>
// Skill properties
this.range = 1;
this.stamina = 20;
this.casttime = 3000;
this.timer = 0;

Skill::Skill()
{
  // Checks
  if(!target.type == Entity::Bush) delete this;
  if(this.range &lt; GetDistance(caster, target)) delete this;
  if(caster.harvestskill &lt; target.requiredskill) delete this;
  if(caster.stamina &lt; (this.stamina * target.requiredskill)) delete this;

  // All checks passed: perform.
  caster.stamina -= (this.stamina * target.requiredskill);
  caster.skills.harvestskill.SetState(USED);
  caster.SetState(CASTING);
  target.Disable(); // Disable interaction for others while youre harvesting.
}

Skill::Tick()
{
  if(this.timer &gt; this.casttime)
   {
     caster.exp.harvestskill += target.reward.exp;
     caster.inventory.add(target.reward.items);
     target.reward.items = 0;
     ReGrow(target); // Request a timercallback for readding rewards.
     target.Enable() // Re-enable interaction.
     caster.SetState(READY);
     delete this; // The skill has finished and can be deleted.
   }
  this.timer += 1;
}

</pre>
<a name="Client"></a><h2> <span class="mw-headline"> Client </span></h2>
<pre>
Skill::Skill()
{
  target.AddEffect(&quot;glow&quot;, 2000);
  target.SetAnimation(&quot;wave&quot;, 3000);
  caster.AddEffect(&quot;harvest&quot;, 2000);
  caster.SetAnimation(&quot;harvest&quot;, 3000);
  delete this; // This skill doesn't need to loop and can be deleted.
}

Skill::Tick(){}

</pre>
<p><br />
</p>
<a name="Mana_Shield"></a><h1> <span class="mw-headline"> Mana Shield </span></h1>
<a name="Server_2"></a><h2> <span class="mw-headline"> Server </span></h2>
<pre>
// Skill properties.
this.requiredskill = 5;
this.mana = 20;
this.casttime = 2000;
this.timer = 0;
this.iscast = false;
this.hp = 0;

Skill::Skill()
{
  // Checks. 
  if(!target == caster) delete this;  
  if(caster.skills.shieldskill.GetValue() &lt; this.requiredskill) delete this;
  if(caster.mana &lt; this.mana) delete this;

  // If the skill is already active, uncast it.
  skill = Findskill(target, &quot;manashield&quot;);
  if(skill) { delete skill; delete this; }

  // All checks passed: perform.
  caster.mana -= this.mana;
  caster.skills.manashield.SetState(USED);
  caster.SetState(CASTING);
}

Skill::Tick()
{
  if(this.iscast)
   {
     if(this.hp &gt; target.hp)
       {
         difference = this.hp - target.hp;
         difference = difference / caster.skills.shieldskill.GetValue();
         if(target.mp =&lt; difference )
          {
            delta = difference - target.mp;
            target.mp = 0;
            target.hp -= delta;
            delete this;  
          }
         else
          {
            target.mp -= difference;
            target.hp = this.hp;
          }
       }
     return;
   }

  if(this.timer &gt; this.casttime)
   {
     this.iscast = true;
     this.hp = target.hp;   
     caster.SetState(READY); 
   }

  timer += 1;
}
</pre> 
<a name="Client_2"></a><h2> <span class="mw-headline"> Client </span></h2>
<pre>
Skill::Skill()
{
  // If the skill is already active, uncast it.
  skill = Findskill(target, &quot;manashield&quot;);
  if(skill) { delete skill; delete this; }

  target.AddEffect(&quot;glow&quot;);
}

Skill::Tick()
{
  if(target.mp == 0)
   {
     target.RemoveEffect(&quot;glow&quot;);
     delete this;
   }
}
</pre>
<a name="Combat_Hit"></a><h1> <span class="mw-headline"> Combat Hit </span></h1>
<a name="Server_3"></a><h2> <span class="mw-headline"> Server </span></h2>
<pre>
// Skill properties.
this.casttime = 0;
this.timer = 0;
this.iscast = false;

Skill::Skill()
{
  // Checks. 
  if(!target == EntityType::Character) delete this; 

  weapons = caster.GetEquipment().GetWeapons();
  if(weapons)
   {
     for(i; weapons.length(); i++)
      {
        speed = weapons.Get(i).speed;
        if(weaponspeed &lt; speed)
          weaponspeed = speed;
      }
     this.casttime = weaponspeed / caster.dex;
   }
  else
    this.casttime = items.FindByName(&quot;Fists&quot;).speed;

  caster.skills.hit.SetState(USED);
  caster.SetState(CASTING);  
}

Skill::Tick()
{
  if(this.iscast)
   {
     weapon = caster.GetEquipment().GetWeapon();
     if(weapon)
      {
        switch(weapon.type)
         {
           case WeaponType::Sword:
             damage = (caster.str*caster.dex)/2 + weapon.damage;
             influence = {&quot;str&quot;, &quot;dex&quot;};
             break;
           case WeaponType::Hammer:
             damage = caster.str + weapon.damage;
             influence = {&quot;str&quot;};
             break;
         }
      }
     else
      {
        damage = (caster.str*caster.con)/2 + items.FindByName(&quot;Fists&quot;).damage;
      }

     if(Throw(caster, dex) &gt; Throw(target, dex))
      {
         target.hp -= damage - target.defense;
         caster.skills.GetSkill(weapon) += 100;
         for(i; influence.length(); i++)
          {
            caster.(influence(i)) += 0.02/influence.length();
          } 
      }
     else
      {
         caster.skills.GetSkill(weapon) += 5; 
      }

     caster.SetState(READY); 
     delete this;
   }

  if(this.timer &gt; this.casttime)
     this.iscast = true;

  timer += 1;
}
</pre>
<a name="Client_3"></a><h2> <span class="mw-headline"> Client </span></h2>
<pre>
Skill::Skill()
{
  weapon = caster.GetEquipment().GetWeapon();
  if(weapon)
   {
     switch(weapon.type)
      {
        case WeaponType::Sword:
          caster.SetAnimation(&quot;attack_sword&quot;, 2500);
          break;
        case WeaponType::Hammer:
          caster.SetAnimation(&quot;attack_hammer&quot;, 3000);
          break;
      }
   }
  else
   {
     caster.SetAnimation(&quot;attack_fists&quot;, 3000);
   }
}

Skill::Tick()
{
  delete this;
}
</pre>

<!-- 
NewPP limit report
Preprocessor node count: 28/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>:&#32;<span dir='ltr'><a href="../../../../articles/s/k/i/Category%7ESkill_Manager_1d67.html" title="Category:Skill Manager">Skill Manager</a></span></div></div></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../../articles/s/k/i/Skill_Manager_Pseudocode_c972.html">Page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/s/k/i/Talk%7ESkill_Manager_Pseudocode_3b5f.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://localhost/index.php/Skill_Manager/Pseudocode">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/clock_half.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage-description"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Peragro_Tempus_Wiki%7ECommunity_Portal_9ca7.html">Community portal</a></li>
	     	      <li id="n-currentevents"><a href="../../../../articles/c/u/r/Peragro_Tempus_Wiki%7ECurrent_events_57bd.html">Current events</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-SEARCH'>
	  <h5>SEARCH</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-TOOLBOX'>
	  <h5>TOOLBOX</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-LANGUAGES'>
	  <h5>LANGUAGES</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>		<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 01:00, 23 November 2006 by <a href="../../../../articles/j/o/s/User%7EJosePhoenix_0279.html" title="User:JosePhoenix">Joseph Long</a>. </li>	  	  <li id="f-about"><a href="../../../../articles/a/b/o/Peragro_Tempus_Wiki%7EAbout_5c7d.html" title="Peragro Tempus Wiki:About">About Peragro Tempus Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Peragro_Tempus_Wiki%7EGeneral_disclaimer_934d.html" title="Peragro Tempus Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
