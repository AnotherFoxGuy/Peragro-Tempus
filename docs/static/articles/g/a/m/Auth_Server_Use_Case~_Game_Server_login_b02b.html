<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/favicon.ico"/>
    <title>Auth Server Use Case: Game Server login - Peragro Tempus Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../raw/MediaWiki%7ECommon.css";
@import "../../../../raw/MediaWiki%7EMonobook.css";
@import "../../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="page-Auth_Server_Use_Case_Game_Server_login">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Auth Server Use Case: Game Server login</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Peragro Tempus Wiki</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Main_Flow"><span class="tocnumber">1</span> <span class="toctext">Main Flow</span></a></li>
<li class="toclevel-1"><a href="#Alternative_Flows"><span class="tocnumber">2</span> <span class="toctext">Alternative Flows</span></a>
<ul>
<li class="toclevel-2"><a href="#Game_server_account_doesn.27t_exists"><span class="tocnumber">2.1</span> <span class="toctext">Game server account doesn't exists</span></a></li>
<li class="toclevel-2"><a href="#Password_invalid"><span class="tocnumber">2.2</span> <span class="toctext">Password invalid</span></a></li>
<li class="toclevel-2"><a href="#Timeout"><span class="tocnumber">2.3</span> <span class="toctext">Timeout</span></a></li>
<li class="toclevel-2"><a href="#Game_server_account_is_locked"><span class="tocnumber">2.4</span> <span class="toctext">Game server account is locked</span></a></li>
<li class="toclevel-2"><a href="#Too_many_tries"><span class="tocnumber">2.5</span> <span class="toctext">Too many tries</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Security_considerations"><span class="tocnumber">3</span> <span class="toctext">Security considerations</span></a>
<ul>
<li class="toclevel-2"><a href="#Challenge"><span class="tocnumber">3.1</span> <span class="toctext">Challenge</span></a>
<ul>
<li class="toclevel-3"><a href="#Game_Server"><span class="tocnumber">3.1.1</span> <span class="toctext">Game Server</span></a></li>
<li class="toclevel-3"><a href="#Auth_Server"><span class="tocnumber">3.1.2</span> <span class="toctext">Auth Server</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Response_Message"><span class="tocnumber">3.2</span> <span class="toctext">Response Message</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Network_Messages"><span class="tocnumber">4</span> <span class="toctext">Network Messages</span></a>
<ul>
<li class="toclevel-2"><a href="#Main_Flow_2"><span class="tocnumber">4.1</span> <span class="toctext">Main Flow</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Test_Cases"><span class="tocnumber">5</span> <span class="toctext">Test Cases</span></a>
<ul>
<li class="toclevel-2"><a href="#Valid_login"><span class="tocnumber">5.1</span> <span class="toctext">Valid login</span></a></li>
<li class="toclevel-2"><a href="#Game_server_account_doesn.27t_exists_2"><span class="tocnumber">5.2</span> <span class="toctext">Game server account doesn't exists</span></a></li>
<li class="toclevel-2"><a href="#Password_invalid_2"><span class="tocnumber">5.3</span> <span class="toctext">Password invalid</span></a></li>
<li class="toclevel-2"><a href="#Timeout_2"><span class="tocnumber">5.4</span> <span class="toctext">Timeout</span></a></li>
<li class="toclevel-2"><a href="#Game_server_account_is_locked_2"><span class="tocnumber">5.5</span> <span class="toctext">Game server account is locked</span></a></li>
<li class="toclevel-2"><a href="#Too_many_tries_2"><span class="tocnumber">5.6</span> <span class="toctext">Too many tries</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Main_Flow"></a><h2> <span class="mw-headline">Main Flow</span></h2>
<ol><li> Game server sends its id with the login request
</li><li> Auth server sends a random number as challenge salt
</li><li> Game server sends salted md5 of the password
</li><li> Auth server verifies the password
</li><li> Auth server sends response
</li></ol>
<a name="Alternative_Flows"></a><h2> <span class="mw-headline">Alternative Flows</span></h2>
<a name="Game_server_account_doesn.27t_exists"></a><h4> <span class="mw-headline">Game server account doesn't exists</span></h4>
<ol><li> Game server sends its id with the login request
</li><li> Auth server sends a random number as challenge salt
</li><li> Game server sends salted md5 of the password
</li><li> Auth server pretends to verify the password
</li><li> Auth server sends response
</li></ol>
<a name="Password_invalid"></a><h4> <span class="mw-headline">Password invalid</span></h4>
<ol><li> Game server sends its id with the login request
</li><li> Auth server sends a random number as challenge salt
</li><li> Game server sends salted md5 of the password
</li><li> Auth server verifies the password
</li><li> Auth server sends response
</li></ol>
<a name="Timeout"></a><h4> <span class="mw-headline">Timeout</span></h4>
<ol><li> Auth server closes tcp connection.
</li></ol>
<a name="Game_server_account_is_locked"></a><h4> <span class="mw-headline">Game server account is locked</span></h4>
<ol><li> Game server sends its id with the login request
</li><li> Auth server sends error with response message.
</li></ol>
<a name="Too_many_tries"></a><h4> <span class="mw-headline">Too many tries</span></h4>
<ol><li> Auth server bans ip for 5 minutes.
</li></ol>
<a name="Security_considerations"></a><h2> <span class="mw-headline">Security considerations</span></h2>
<a name="Challenge"></a><h4> <span class="mw-headline">Challenge</span></h4>
<p>Both peers, auth server and game server, calculate a checksum that should be equal for a successful login.
</p>
<a name="Game_Server"></a><h5> <span class="mw-headline">Game Server</span></h5>
<pre> checksum = md5( challenge + md5( password ) )
</pre>
<a name="Auth_Server"></a><h5> <span class="mw-headline">Auth Server</span></h5>
<p>The auth server stores only the md5 hash of the password in the database.
That means password_hash is equal to the md5 hash sum of the plain text password.
</p>
<pre> checksum = md5( challenge + password_hash )
</pre>
<a name="Response_Message"></a><h4> <span class="mw-headline">Response Message</span></h4>
<p>The server must not differ between not existing game server accounts or wrong password. It would give away a hint that the game server account actually exists.
</p><p>That is the reason why we calculate the checksum even if we already know there is no game server account.
So the response time from the server is not shorter than usual.
</p>
<a name="Network_Messages"></a><h2> <span class="mw-headline">Network Messages</span></h2>
<a name="Main_Flow_2"></a><h4> <span class="mw-headline">Main Flow</span></h4>
<ul><li>Step 1: ServerLoginRequestMessage
</li><li>Step 2: ServerLoginChallengeRequestMessage
</li><li>Step 3: ServerLoginChallengeResponseMessage
</li><li>Step 5: ServerLoginResponseMessage
</li></ul>
<a name="Test_Cases"></a><h2> <span class="mw-headline">Test Cases</span></h2>
<a name="Valid_login"></a><h4> <span class="mw-headline">Valid login</span></h4>
<p>Game server sends the id of an existing account that is not locked.
</p>
<dl><dt>Expected result
</dt><dd>Auth Server should send a positive response message
</dd></dl>
<a name="Game_server_account_doesn.27t_exists_2"></a><h4> <span class="mw-headline">Game server account doesn't exists</span></h4>
<p>Game server sends the id of a not existing account.
</p>
<dl><dt>Expected result
</dt><dd>Auth Server should send a negative response message. The message must not differ from the message sent by the <a href="#Password_invalid_2" title="">Password invalid</a> test case.
</dd></dl>
<a name="Password_invalid_2"></a><h4> <span class="mw-headline">Password invalid</span></h4>
<p>Game server sends a wrong password.
</p>
<dl><dt>Expected result
</dt><dd>Auth Server should send a negative response message. The message must not differ from the message sent by the <a href="#Game_server_account_doesn.27t_exists_2" title="">Game server account doesn't exists</a> test case.
</dd></dl>
<a name="Timeout_2"></a><h4> <span class="mw-headline">Timeout</span></h4>
<p>Game server sends the id and then waits for 1 minute.
</p>
<dl><dt>Expected result
</dt><dd>Auth Server should close the connection.
</dd></dl>
<a name="Game_server_account_is_locked_2"></a><h4> <span class="mw-headline">Game server account is locked</span></h4>
<p>Game server sends the id of a blocked account.
</p>
<dl><dt>Expected result
</dt><dd>Auth Server should send a negative response message.
</dd></dl>
<a name="Too_many_tries_2"></a><h4> <span class="mw-headline">Too many tries</span></h4>
<p>Game server sends wrong passwords repeatedly.
</p>
<dl><dt>Expected result
</dt><dd>Auth Server should ban the ip address for 5 minutes.
</dd></dl>

<!-- 
NewPP limit report
Preprocessor node count: 22/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>:&#32;<span dir='ltr'><a href="../../../../articles/a/u/t/Category%7EAuth_Server_Design_ca7a.html" title="Category:Auth Server Design">Auth Server Design</a></span></div></div></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../../articles/g/a/m/Auth_Server_Use_Case%7E_Game_Server_login_b02b.html">Page</a></li><li id="ca-talk"
	       class="new"	       ><a href="../../../../articles/a/u/t/Talk%7EAuth_Server_Use_Case%7E_Game_Server_login_ef77.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://localhost/index.php/Auth_Server_Use_Case:_Game_Server_login">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/clock_half.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage-description"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Peragro_Tempus_Wiki%7ECommunity_Portal_9ca7.html">Community portal</a></li>
	     	      <li id="n-currentevents"><a href="../../../../articles/c/u/r/Peragro_Tempus_Wiki%7ECurrent_events_57bd.html">Current events</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-SEARCH'>
	  <h5>SEARCH</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-TOOLBOX'>
	  <h5>TOOLBOX</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-LANGUAGES'>
	  <h5>LANGUAGES</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>		<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 16:03, 24 December 2008 by Peragro Tempus Wiki user <a href="../../../../articles/p/k/_/User%7EPK_1be7.html" title="User:PK">PK</a>. </li>	  	  <li id="f-about"><a href="../../../../articles/a/b/o/Peragro_Tempus_Wiki%7EAbout_5c7d.html" title="Peragro Tempus Wiki:About">About Peragro Tempus Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Peragro_Tempus_Wiki%7EGeneral_disclaimer_934d.html" title="Peragro Tempus Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
