<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../../../../misc/favicon.ico"/>
    <title>NPC XML - Peragro Tempus Wiki</title>
    <style type="text/css">/*<![CDATA[*/ @import "../../../../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../../../../skins/common/commonPrint.css" />
    <!--[if lt IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "../../../../skins/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "../../../../skins/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE]><script type="text/javascript" src="../../../../skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    <script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/md5.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/utf8.js"></script>
    <script type="text/javascript" src="../../../../skins/offline/lookup.js"></script>
    <script type="text/javascript" src="../../../../raw/gen.js"></script>        <style type="text/css">/*<![CDATA[*/
@import "../../../../raw/MediaWiki%7ECommon.css";
@import "../../../../raw/MediaWiki%7EMonobook.css";
@import "../../../../raw/gen.css";
/*]]>*/</style>          </head>
  <body
    class="page-NPC_XML">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">NPC XML</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From Peragro Tempus Wiki</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <p>This page is designed to help guide a designer through the process of building an NPC in XML. If you're looking for <a href="../../../../articles/k/e/y/Key_Figures_6063.html" title="Key Figures">Key Figures</a> or other active NPCs you need another page.
</p><p>This system needs some additions and expansions, some of which have been listed under <a href="../../../../articles/n/p/c/NPC_XML_ToDo_fc00.html" title="NPC XML ToDo">NPC XML ToDo</a>
If looking for ways to help produce NPCs go to <a href="../../../../articles/n/p/c/NPC_ToDo_fa72.html" title="NPC ToDo">NPC ToDo</a>
</p><p><a href="https://cyanox.nl/peragro/trunk/data/xml/npcs/" class="external text" title="https://cyanox.nl/peragro/trunk/data/xml/npcs/" rel="nofollow">example NPCs</a>
</p><p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#basic_NPC"><span class="tocnumber">1</span> <span class="toctext">basic NPC</span></a>
<ul>
<li class="toclevel-2"><a href="#name"><span class="tocnumber">1.1</span> <span class="toctext">name</span></a></li>
<li class="toclevel-2"><a href="#mesh"><span class="tocnumber">1.2</span> <span class="toctext">mesh</span></a></li>
<li class="toclevel-2"><a href="#position"><span class="tocnumber">1.3</span> <span class="toctext">position</span></a>
<ul>
<li class="toclevel-3"><a href="#sector"><span class="tocnumber">1.3.1</span> <span class="toctext">sector</span></a></li>
<li class="toclevel-3"><a href="#X.2CY.2CZ"><span class="tocnumber">1.3.2</span> <span class="toctext">X,Y,Z</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#ai"><span class="tocnumber">1.4</span> <span class="toctext">ai</span></a></li>
<li class="toclevel-2"><a href="#inventory"><span class="tocnumber">1.5</span> <span class="toctext">inventory</span></a>
<ul>
<li class="toclevel-3"><a href="#slot"><span class="tocnumber">1.5.1</span> <span class="toctext">slot</span></a></li>
<li class="toclevel-3"><a href="#items"><span class="tocnumber">1.5.2</span> <span class="toctext">items</span></a></li>
<li class="toclevel-3"><a href="#variation"><span class="tocnumber">1.5.3</span> <span class="toctext">variation</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#dialog"><span class="tocnumber">1.6</span> <span class="toctext">dialog</span></a>
<ul>
<li class="toclevel-3"><a href="#.3Ctext.3E.2F.3Canswer.3E"><span class="tocnumber">1.6.1</span> <span class="toctext">&lt;text&gt;/&lt;answer&gt;</span></a></li>
<li class="toclevel-3"><a href="#.3Cfunction.3E"><span class="tocnumber">1.6.2</span> <span class="toctext">&lt;function&gt;</span></a></li>
<li class="toclevel-3"><a href="#Primitives"><span class="tocnumber">1.6.3</span> <span class="toctext">Primitives</span></a></li>
<li class="toclevel-3"><a href="#if"><span class="tocnumber">1.6.4</span> <span class="toctext">if</span></a></li>
<li class="toclevel-3"><a href="#begin"><span class="tocnumber">1.6.5</span> <span class="toctext">begin</span></a></li>
<li class="toclevel-3"><a href="#Function"><span class="tocnumber">1.6.6</span> <span class="toctext">Function</span></a>
<ul>
<li class="toclevel-4"><a href="#dialog_2"><span class="tocnumber">1.6.6.1</span> <span class="toctext">dialog</span></a></li>
<li class="toclevel-4"><a href="#inventory_2"><span class="tocnumber">1.6.6.2</span> <span class="toctext">inventory</span></a></li>
<li class="toclevel-4"><a href="#stat"><span class="tocnumber">1.6.6.3</span> <span class="toctext">stat</span></a></li>
<li class="toclevel-4"><a href="#reputation"><span class="tocnumber">1.6.6.4</span> <span class="toctext">reputation</span></a></li>
<li class="toclevel-4"><a href="#examples"><span class="tocnumber">1.6.6.5</span> <span class="toctext">examples</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="basic_NPC"></a><h1> <span class="mw-headline">basic NPC</span></h1>
<p>every NPC must have the following:
</p>
<pre>
&lt;npc&gt;
		&lt;name&gt;(the NPC's name)&lt;/name&gt;
		&lt;mesh&gt;(this is the body shape/texture)&lt;/mesh&gt;
		&lt;position sector=&quot;World&quot; x=&quot;(X-location)&quot; y=&quot;(Y-location)&quot; z=&quot;(Z-location)&quot;/&gt;
		&lt;race&gt;(the NPC's race)&lt;/race&gt; &lt;!-- used for stats --&gt;
		&lt;ai&gt;(the unit's movement pattern)&lt;/ai&gt;
		&lt;aisetting&gt;
			(each AI type has a set of information it wants to see here. See the AI descriptions below)
		&lt;/aisetting&gt;
		&lt;inventory /&gt;
		&lt;dialog id=&quot;0&quot;&gt;
			&lt;text&gt;(input text here)&lt;/text&gt;
		&lt;/dialog&gt;
	&lt;/npc&gt;
</pre>
<a name="name"></a><h2> <span class="mw-headline">name</span></h2>
<p>Every NPC has a unique name.
</p>
<a name="mesh"></a><h2> <span class="mw-headline">mesh</span></h2>
<p>This tells PT what body shape/texture to use. There are currently 4 available meshes;
</p>
<ul><li> test (human-male)
</li><li> dragonfly
</li><li> skeleton
</li><li> horse
</li></ul>
<a name="position"></a><h2> <span class="mw-headline">position</span></h2>
<a name="sector"></a><h3> <span class="mw-headline">sector</span></h3>
<p>The outdoors is one big sector called "World".
Interiors (insides of houses, caves,...)have their own sector named after the interior itself.
</p>
<a name="X.2CY.2CZ"></a><h3> <span class="mw-headline">X,Y,Z</span></h3>
<p>Coordinate location within the sector.
</p>
<a name="ai"></a><h2> <span class="mw-headline">ai</span></h2>
<p>The AI tells the unit what sort of movement to engage in, and each requires it's own special tags to know how to deal with that motion.
</p>
<ul><li> <a href="../../../../articles/a/i/_/AI_stray_15c1.html" title="AI stray">stray</a> makes the AI meander about it's base Position.
</li><li> <a href="../../../../articles/a/i/_/AI_path_02ff.html" title="AI path">path</a> makes the AI move from Waypoint to waypoint.
</li></ul>
<a name="inventory"></a><h2> <span class="mw-headline">inventory</span></h2>
<p>These are the items the NPC has.
</p><p>Each item has the following information
</p>
<pre>
&lt;item slot=&quot;0&quot; item=&quot;3&quot; variation=&quot;0&quot; /&gt;
</pre>
<a name="slot"></a><h3> <span class="mw-headline">slot</span></h3>
<p>in the above example, slot number 0 means that it is in the right hand. It is currently the only position defined.
</p>
<a name="items"></a><h3> <span class="mw-headline">items</span></h3>
<p><a href="https://cyanox.nl/peragro/trunk/data/xml/items/items.xml" class="external text" title="https://cyanox.nl/peragro/trunk/data/xml/items/items.xml" rel="nofollow">items</a>
</p><p>In the above example item number three is a bastard sword. If we wanted to replace that with an apple, change 3 to 1.
</p>
<a name="variation"></a><h3> <span class="mw-headline">variation</span></h3>
<p>Variation means the item looks and behaves like the base item, but is still <b>unique</b>.
This is used for example books: although certain books can look the same, their content differs.
</p>
<a name="dialog"></a><h2> <span class="mw-headline">dialog</span></h2>
<p>This is how the NPC knows what to say/do.
</p>
<a name=".3Ctext.3E.2F.3Canswer.3E"></a><h3> <span class="mw-headline">&lt;text&gt;/&lt;answer&gt;</span></h3>
<pre>
&lt;dialog id=&quot;0&quot;&gt;
	&lt;text&gt;This is what the NPC will say.&lt;/text&gt;
	&lt;answer href=&quot;1&quot;&gt;This is the first answer the player can give.&lt;/answer&gt;
	&lt;answer href=&quot;5&quot;&gt;This is the next answer.&lt;/answer&gt;
	&lt;answer href=&quot;6&quot;&gt;The number in quotes after href= is what dialog the NPC will go to next.&lt;/answer&gt;
	&lt;answer&gt;An answer with no href ends the conversation.&lt;/answer&gt;
&lt;/dialog&gt;
</pre>
<p>The next dialog id window to appear will be the same as the number in the answer's href= statement. Thus, selecting 
</p>
<pre>
	&lt;answer href=&quot;1&quot;&gt;Whatever answer has href=&quot;1&quot;.&lt;/answer&gt;
</pre>
<p>will take the player to 
</p>
<pre>
&lt;dialog id=&quot;1&quot;&gt;
</pre>
<a name=".3Cfunction.3E"></a><h3> <span class="mw-headline">&lt;function&gt;</span></h3>
<p>To make NPC interactions more dynamic they have the ability to track various stats and features of different characters. This is done using the &lt;function&gt; tag. 
</p><p>Uses (dialog XX) to determine where to send the conversation. As part of an (if ) switch, this can make a choice or, when placed at the end of a (begin ) statement will move to the next piece of dialog after doing some calculations. By nesting (begin ) and (if ) segments you can create complex dialog choice sets for NPCs.
</p>
<a name="Primitives"></a><h3> <span class="mw-headline">Primitives</span></h3>
<ul><li>&lt;
</li><li>&gt;
</li><li>==
</li><li>!=
</li><li>and
</li><li>not
</li><li>or
</li></ul>
<a name="if"></a><h3> <span class="mw-headline">if</span></h3>
<pre>
(if &lt;predicate&gt; &lt;consequent&gt; [alternative])
</pre>
<p>Examples:
</p>
<pre>
 * If the reputation of test_dummy is higher then 1 go to dialog 10 else dialog 11.
 (if (&gt; (reputation test_dummy) 1) 
     (dialog 10) 
     (dialog 11))

 * If the reputation of test_dummy is higher then 1 go to dialog 10 else do nothing.
 (if (&gt; (reputation test_dummy) 1) 
     (dialog 11))

 * If the reputation of test_dummy is higher then 1 go to dialog 10 and add 1 to reputation else dialog 11.
 (if (&gt; (reputation test_dummy) 1) 
     (begin (dialog 10) (reputation test_dummy add 1))
     (dialog 11))
</pre>
<a name="begin"></a><h3> <span class="mw-headline">begin</span></h3>
<pre>
(begin &lt;expr1&gt; &lt;expr2&gt; ...)
</pre>
<p>A sequence of expressions.
</p>
<a name="Function"></a><h3> <span class="mw-headline">Function</span></h3>
<a name="dialog_2"></a><h4> <span class="mw-headline">dialog</span></h4>
<pre>
(dialog &lt;#&gt;)
</pre>
<p>Go to a dialog ID.
</p><p>Examples:
</p>
<pre>
(dialog 15) 
</pre>
<a name="inventory_2"></a><h4> <span class="mw-headline">inventory</span></h4>
<pre>
(inventory &lt;add/remove/count&gt; &lt;itemId&gt; [#])
</pre>
<p>Examples:
</p>
<pre>
Note: 1 is apple ID.
(inventory add 1)     // Add one apple
(inventory add 1 50)  // Add 50 apples
(inventory sub 1)     // Remove one apple.
(inventory sub 1 50)  // Remove 50 apples.
(inventory count 1)   // Count the number of apples in the inventory.
</pre>
<a name="stat"></a><h4> <span class="mw-headline">stat</span></h4>
<pre>
(stat StatName &lt;add/sub/set&gt; &lt;#&gt;)
</pre>
<p>Examples:
</p>
<pre>
(stat Strength)         // Get the amount of strength.
(stat Strength add 1)   // Add one to strength.
(stat Strength sub 1)   // Substract one from strength.
(stat Strength set 15)  // Set strength to 15.
</pre>
<a name="reputation"></a><h4> <span class="mw-headline">reputation</span></h4>
<pre>
(reputation RepName [CharName] &lt;add/sub/set&gt; &lt;#&gt;)
</pre>
<p>Examples:
</p>
<pre>
(reputation like_apples)  // Get the like_apples reputation level for the current entity.
(reputation like_apples test_dummy)  // Get the like_apples reputation level for the test_dummy entity.
(reputation like_apples add 1)  // Add one to like_apples reputation for the current entity.
(reputation like_apples test_dummy add 1)  // Add one to like_apples reputation for the test_dummy entity.
</pre>
<a name="examples"></a><h4> <span class="mw-headline">examples</span></h4>
<pre>
---------------------------------------------------------------------------------
&lt;function&gt;
(if (&gt; (reputation test_dummy) -1) 
    (dialog 10) 
    (dialog 11))
&lt;/function&gt;
---------------------------------------------------------------------------------
&lt;function&gt;
(begin (reputation test_dummy sub 1)
       (if (&gt; (stat Endurance) 5) 
           (begin (stat Endurance add 1)(inventory add 1)(dialog 4)) 
           (dialog 6)))
&lt;/function&gt;
---------------------------------------------------------------------------------
&lt;function&gt;
(if (&gt; (stat Endurance) 5) 
    (begin (stat Endurance add 1)(inventory add 1)(dialog 4)) 
    (dialog 6)))
&lt;/function&gt;
---------------------------------------------------------------------------------
</pre>

<!-- 
NewPP limit report
Preprocessor node count: 75/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="../../../../articles/c/a/t/Special%7ECategories_101d.html" title="Special:Categories">Category</a>:&#32;<span dir='ltr'><a href="../../../../articles/c/o/d/Category%7ECode_d87b.html" title="Category:Code">Code</a></span></div></div></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main"
	       class="selected"	       ><a href="../../../../articles/n/p/c/NPC_XML_6659.html">Page</a></li><li id="ca-talk"
	       	       ><a href="../../../../articles/n/p/c/Talk%7ENPC_XML_e6f5.html">Discussion</a></li><li id="ca-current"
	       	       ><a href="http://localhost/index.php/NPC_XML">Current revision</a></li>	  </ul>
	</div>
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../../../../misc/clock_half.png);"
	    href="../../../../index.html"
	    title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-mainpage-description"><a href="../../../../index.html">Main Page</a></li>
	     	      <li id="n-portal"><a href="../../../../articles/c/o/m/Peragro_Tempus_Wiki%7ECommunity_Portal_9ca7.html">Community portal</a></li>
	     	      <li id="n-currentevents"><a href="../../../../articles/c/u/r/Peragro_Tempus_Wiki%7ECurrent_events_57bd.html">Current events</a></li>
	     	      <li id="n-recentchanges"><a href="../../../../articles/r/e/c/Special%7ERecentChanges_e0d0.html">Recent changes</a></li>
	     	      <li id="n-help"><a href="../../../../articles/c/o/n/Help%7EContents_22de.html">Help</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-SEARCH'>
	  <h5>SEARCH</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-TOOLBOX'>
	  <h5>TOOLBOX</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-LANGUAGES'>
	  <h5>LANGUAGES</h5>
	  <div class='pBody'>
	    <ul>
	    	    </ul>
	  </div>
	</div>
		<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Search</label></h5>
	  <div id="searchBody" class="pBody">
	    <form action="javascript:goToStatic(3)" id="searchform"><div>
	      <input id="searchInput" name="search" type="text"
	        accesskey="f" value="" />
	      <input type='submit' name="go" class="searchButton" id="searchGoButton"
	        value="Go" />
	    </div></form>
	  </div>
	</div>
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>		<ul id="f-list">
	  	  	  <li id="f-credits">This page was last modified 15:09, 28 September 2008 by <a href="../../../../articles/c/y/a/User%7ECyaNox_4c16.html" title="User:CyaNox">Mark Sanders</a>. Based on work by <a href="../../../../articles/d/a/r/User%7EDarker_Dreams_6a0a.html" title="User:Darker Dreams">Ryan Robinson</a> and <a href="../../../../articles/s/u/e/User%7ESueastside_0e95.html" title="User:Sueastside">Jelle Hellemans</a>.</li>	  	  <li id="f-about"><a href="../../../../articles/a/b/o/Peragro_Tempus_Wiki%7EAbout_5c7d.html" title="Peragro Tempus Wiki:About">About Peragro Tempus Wiki</a></li>	  <li id="f-disclaimer"><a href="../../../../articles/g/e/n/Peragro_Tempus_Wiki%7EGeneral_disclaimer_934d.html" title="Peragro Tempus Wiki:General disclaimer">Disclaimers</a></li>	  	</ul>
      </div>
    </div>
  </body>
</html>
