SubDir TOP src client ;

SubInclude TOP src client network ;
SubInclude TOP src client gui ;
SubInclude TOP src client effects ;
SubInclude TOP src client entity ;
SubInclude TOP src client combat ;
SubInclude TOP src client item ;
SubInclude TOP src client pointer ;
SubInclude TOP src client console ;
SubInclude TOP src client event ;
SubInclude TOP src client trade ;
SubInclude TOP src client chat ;

Description client : "Client" ;
Application client : 
[ Wildcard *.h *.cpp ] 
[ Wildcard [ ConcatDirs pointer ] : *.h *.cpp ] ;
ExternalLibs client : CEGUI CRYSTAL CEL ;
LinkWith client : client-network client-gui client-effects client-entitymanager client-eventmanager client-combatmanager client-itemmanager client-trademanager client-chatmanager client-console util ;

MsvcExternalLibrary client : "wsock32.lib" ;

if $(WSOCK32.LFLAGS) {
    LFlags client : $(WSOCK32.LFLAGS) ;
}

if [ Property build : projgen_version ] != 6
{
  SubVariant static ;
  
  Application client_static : [ Wildcard *.h *.cpp ] [ Wildcard [ ConcatDirs pointer ] : *.h *.cpp ] : independent noinstall ;
  CFlags client_static : [ FDefines CS_STATIC_LINKED ] ;
  MsvcDefine client_static : CS_STATIC_LINKED ;
  LFlags client_static : -lcrystalspace_staticplugins  -lcel_staticplugins ;
  LinkWith client_static : client-network client-gui client-effects client-entitymanager client-eventmanager client-combatmanager client-itemmanager client-trademanager client-chatmanager client-console util ;
  LinkStaticPlugins client_static :
    addon_questdef
    mgr_quests
    pfactormove
    pfdefcam
    pfinput
    pfengine
    pfmesh
    pfmove
    pfquest
    pftools
    pftrigger
    pfzone
    stdphyslayer
  :
  ;

  cs_plugins_static = 
    vfs
    bugplug
    freefnt2
    csfont
    fontplex
    gl3d
    csconin
    csconout
    sndsyssoft
    sndsyswin
    imgplex
    xmlread
    bindoc
    dsplex
    sndsysloader
    sndsyswav
    sndsysogg
    engine
    csparser
    cssynldr
    sndmanager
    csopcode
    cscegui
    reporter
    stdrep
    shadermgr
    xmlshader
    rendstep_std
    csbmpimg
    csddsimg
    csgifimg
    csjngimg
    csjpgimg
    cspngimg
    particlesldr
    particles
    cstgaimg
    gmeshldr
    genmesh
    gmeshanim
    gmeshldr
    gmeshskelanim2
    skeleton
    rendloop_loader
    simpleformerldr
    simpleformer
    terrainldr
    bruteblock
    frustvis
    engseq
    sequence
    sprcal3dldr
    sprcal3d
    glshader_fixed
    glshader_arb
    glshader_cg
    thing
    thingldr
  ;

  cs_plugins_static_optional = 
  ;

  if $(TARGET.OS) = "WIN32" { cs_plugins_static += glwin32 ; }

  LinkStaticPlugins client_static :  $(cs_plugins_static)  : $(cs_plugins_static_optional) : CRYSTAL  ;

  ExternalLibs client_static : CRYSTAL CEL CEGUI ;
  MsvcExternalLibrary client_static : "wsock32.lib" ;
  MsvcExternalLibrary client_static : "libcrystalspace_staticplugins.lib libcel_staticplugins.lib" : release ;
  MsvcExternalLibrary client_static : "libcrystalspace_staticplugins_d.lib libcel_staticplugins_d.lib" : debug ;
  
  SubVariant ;
}
