SubDir TOP src client ;

SubInclude TOP src client network ;
SubInclude TOP src client gui ;
SubInclude TOP src client entity ;
SubInclude TOP src client combat ;
SubInclude TOP src client data ;
SubInclude TOP src client pointer ;
SubInclude TOP src client trade ;
SubInclude TOP src client chat ;
SubInclude TOP src client input ;
SubInclude TOP src client serversetup ;
SubInclude TOP src client state ;
SubInclude TOP src client environment ;
SubInclude TOP src client effect ;
SubInclude TOP src client component ;
SubInclude TOP src client cursor ;
SubInclude TOP src client quest ;
SubInclude TOP src client user ;

Description peragro : "Peragro Tempus Client" ;
ApplicationIcon win32 : peragro : ../../data/art/icons/peragro_icon.ico ;
ApplicationIcon macosx : peragro : ../../data/art/icons/peragro_icon.icns ;
Application peragro :
[ Wildcard *.h *.cpp ]
[ Wildcard [ ConcatDirs pointer ] : *.h *.cpp ] ;
ExternalLibs peragro : CEGUI CRYSTAL CEL BOOST.FILESYSTEM ;
LinkWith peragro : reporter client-network client-gui client-entitymanager eventmanager-cs client-inputmanager client-combatmanager client-data client-trademanager client-chatmanager util client-serversetup client-statemanager client-environmentmanager client-effect client-cursor client-component client-questmanager client-usermanager ;

MsvcExternalLibrary peragro : "wsock32.lib" ;

if $(WSOCK32.LFLAGS) {
    LFlags peragro : $(WSOCK32.LFLAGS) ;
}

if $(HAVE_STATIC_PLUGINS) = "yes"
{
  SubVariant static ;

  ApplicationIcon win32 : peragro_static : ../../data/art/icons/peragro_icon.ico ;
  ApplicationIcon macosx : peragro_static : ../../data/art/icons/peragro_icon.icns ;
  Application peragro_static : [ Wildcard *.h *.cpp ] [ Wildcard [ ConcatDirs pointer ] : *.h *.cpp ] : independent noinstall ;
  CFlags peragro_static : [ FDefines CS_STATIC_LINKED ] ;
  MsvcDefine peragro_static : CS_STATIC_LINKED ;
  LinkWith peragro_static : reporter client-network client-gui client-entitymanager eventmanager-cs client-inputmanager client-combatmanager client-data client-trademanager client-chatmanager util client-serversetup worldloader client-statemanager client-environmentmanager client-effect client-cursor client-component client-questmanager client-usermanager ;
  LinkStaticPlugins peragro_static :
   csclipboard
   loader_starbox
   mystarbox
   component_playercontrols
   component_viewcontrols
   component_networkmove
   component_viewbob
   componentstats
   soundmanager
   worldloader
  ;

  LinkStaticPlugins peragro_static :
    addon_questdef
    mgr_quests
    pfactormove
    pfdefcam
    pfinput
    pfengine
    pfmesh
    pfmove
    pfquest
    pftools
    pftrigger
    pfzone
    stdphyslayer
    pfsteer
  :
  : CEL
  ;

  LinkStaticPlugins peragro_static :
  ; Generic stuff
    vfs engine engseq csopcode csparser reporter sequence bugplug csconin csconout stdrep 

    csfont fontplex freefnt2

    dynavis frustvis

    rendstep_stencil  rendloop_loader rendstep_std

    rm_rlcompat rm_unshadowed rm_shadow_pssm

    gl3d glshader_arb glshader_fixed glwin32 glshader_cg shadermgr vproc_std shaderweaver ptpdlight

    cscegui

    bindoc xmlread xmlshader

    csddsimg csbmpimg csjpgimg cspngimg cstgaimg csgifimg imgplex

    nullmesh protomesh protomeshldr
    animesh animeshldr
    decal dsplex
    particles particlesldr emit emitldr haze hazeldr
    genmesh gmeshanimpdl gmeshldr gmeshskelanim2 skeleton2 skeleton2ldr
    gmeshanim skeleton skelldr
    simpleformer simpleformerldr bruteblock terrainldr terrain2 terrain2ldr
    spr2d spr2dldr
    spr3d spr3dldr
    sprcal3d sprcal3dldr

    sndsysloader sndsysogg sndsyswav sndmanager sndsyssoft
    
  : glwin32 glx2d glosx2d xwin xext86vm
    sndmanager sndsyssoft sndsysloader sndsysnull sndsysogg sndsyswav sndsyswin
    sndsyscoreaudio sndsysoss sndsysalsa
  : CRYSTAL
  ;

  ExternalLibs peragro_static : CRYSTAL CEL CEGUI ;

  MsvcExternalLibrary peragro_static : "wsock32.lib" ;

  if $(WSOCK32.LFLAGS) {
      LFlags peragro_static : $(WSOCK32.LFLAGS) ;
  }

  SubVariant ;
}
