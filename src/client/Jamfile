SubDir TOP src client ;

SubInclude TOP src client network ;
SubInclude TOP src client gui ;
SubInclude TOP src client effects ;

Description client : "Client" ;
Application client : [ Wildcard *.h *.cpp ] ;
ExternalLibs client : CEGUI CRYSTAL CEL ;
LinkWith client : client-network client-gui client-effects entity util ;

MsvcExternalLibrary client : "wsock32.lib" ;

if $(WSOCK32.LFLAGS) {
    LFlags client : $(WSOCK32.LFLAGS) ;
}

if [ Property build : projgen_version ] != 6
{
  SubVariant static ;
  
  Application client_static : [ Wildcard *.cpp *.h ] : independent noinstall ;
  CFlags client_static : [ FDefines CS_STATIC_LINKED ] ;
  MsvcDefine client_static : CS_STATIC_LINKED ;
  LFlags client_static : -lcrystalspace_staticplugins  -lcel_staticplugins ;
  LinkWith client_static : client-network client-gui client-effects entity util ;
  LinkStaticPlugins client_static :
    addon_celentity
    addon_celentitytpl
    addon_questdef
    bltest
    mgr_quests
    pfactormove
    pfdefcam
    pfinput
    pfinv
    pfengine
    pfmesh
    pfmove
    pfquest
    pftest
    pftools
    pftrigger
    pfzone
    stdphyslayer
    xmlpersist
  :
  ;

  cs_plugins_static = 
    bugplug
    csopcode
    csconin
    fancycon
    simpcon
    csconout
    cssynldr
    csparser
    cssaver
    frustvis
    joylin
    bindoc
    dsplex
    xmlread
    xmltiny
    engine
    rendloop_loader
    rendstep_std
    engseq
    vfs
    csfont
    fontplex
    freefnt2
    cegui
    bezier
    bezierldr
    emit
    emitldr
    explo
    exploldr
    fire
    fireldr
    fountain
    fountldr
    gmeshanim
    genmesh
    gmesh3ds
    gmeshldr
    gmeshskelanim
    haze
    hazeldr
    instmesh
    instmeshldr
    lghtng
    lghtngldr
    nullmesh
    nullmeshldr
    particles
    particlesldr
#    partphys_ode
    partphys_simple
    protomesh
    protomeshldr
    rain
    rainldr
    snow
    snowldr
    spiral
    spirldr
    spr2d
    spr2dldr
    spr3d
    spr3dbin
    spr3md2
    spr3dldr
    sprcal3d
    sprcal3dldr
    stars
    starldr
    bruteblock
    terrainldr
    skeleton
    skelldr
    thing
    thingldr
    movierecorder
    physldr
#    odedynam
    ptanimimg
    stdpt
    tlfunc
    reporter
    sequence
    sndsysloader
    sndsysogg
    sndsyswav
    sndmanager
#    sndsysjackasyn
#    sndsysoss
    sndsysalsa
    sndsyssoft
    sndsyseventrecorder
    stdrep
    simpleformerldr
    simpleformer
    pagingformerldr
    pagingformer
    cacacanvas
    memory2d
    null2d
    glx2d
    sdl2d
    x2d
#    wxgl
    xext86vm
    xextshm
    xwin
    cscursor
    csbmpimg
    csddsimg
    csgifimg
    csjngimg
    csjpgimg
    imgplex
    cspngimg
    cstgaimg
    null3d
    gl3d
    xmlshader
    shadermgr
    glshader_arb
    glshader_cg
    glshader_fixed
    glshader_ps1
    softshader
    vproc_std
    soft3d
  ;
  cs_plugins_static_optional = 
#    aws
#    aws2
#    csperl5
#    cspython
#    _cspace
#    dynavis_debug
    joywin
    rendstep_fatrl
    rendstep_stencil
    rendstep_stencil2
#    csvosa3dl
#    bullet
    sndsyswin
    glwin32
    glosx2d
    cgdriver2d
    ddraw2d
    sndsyscoreaudio
#    dynavis
  ;
  if $(TARGET.OS) = "WIN32" { cs_plugins_static += glwin32 ; }

  LinkStaticPlugins client_static :  $(cs_plugins_static)  : $(cs_plugins_static_optional) : CRYSTAL  ;

  ExternalLibs client_static : CRYSTAL CEL CEGUI ;
  MsvcExternalLibrary client_static : "wsock32.lib" ;
  MsvcExternalLibrary client_static : "libcrystalspace_staticplugins.lib libcel_staticplugins.lib" : release ;
  MsvcExternalLibrary client_static : "libcrystalspace_staticplugins_d.lib libcel_staticplugins_d.lib" : debug ;
  
  SubVariant ;
}
