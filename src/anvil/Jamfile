SubDir TOP src anvil ;

Description anvil : "Anvil" ;
Application anvil : [ Wildcard *.h *.cpp ] ;
ExternalLibs anvil : CRYSTAL ;

if [ Property build : projgen_version ] != 6
{
  SubVariant static ;
  
  Application anvil_static : [ Wildcard *.cpp *.h ] : independent noinstall ;
  CFlags anvil_static : [ FDefines CS_STATIC_LINKED ] ;
  MsvcDefine anvil_static : CS_STATIC_LINKED ;
  LFlags anvile_static : -lcrystalspace_staticplugins ;

  cs_plugins_static = 
    bugplug
    csopcode
    csconin
    fancycon
    simpcon
    csconout
    cssynldr
    csparser
    cssaver
    frustvis
    joylin
    bindoc
    dsplex
    xmlread
    xmltiny
    engine
    rendloop_loader
    rendstep_std
    engseq
    vfs
    csfont
    fontplex
    freefnt2
    cegui
    bezier
    bezierldr
    emit
    emitldr
    explo
    exploldr
    fire
    fireldr
    fountain
    fountldr
    gmeshanim
    genmesh
    gmesh3ds
    gmeshldr
    gmeshskelanim
    haze
    hazeldr
    instmesh
    instmeshldr
    lghtng
    lghtngldr
    nullmesh
    nullmeshldr
    particles
    particlesldr
#    partphys_ode
    partphys_simple
    protomesh
    protomeshldr
    rain
    rainldr
    snow
    snowldr
    spiral
    spirldr
    spr2d
    spr2dldr
    spr3d
    spr3dbin
    spr3md2
    spr3dldr
    sprcal3d
    sprcal3dldr
    stars
    starldr
    bruteblock
    terrainldr
    skeleton
    skelldr
    thing
    thingldr
    movierecorder
    physldr
#    odedynam
    ptanimimg
    stdpt
    tlfunc
    reporter
    sequence
    sndsysloader
    sndsysogg
    sndsyswav
    sndmanager
#    sndsysjackasyn
#    sndsysoss
    sndsysalsa
    sndsyssoft
    sndsyseventrecorder
    stdrep
    simpleformerldr
    simpleformer
    pagingformerldr
    pagingformer
    cacacanvas
    memory2d
    null2d
    glx2d
    sdl2d
    x2d
#    wxgl
    xext86vm
    xextshm
    xwin
    cscursor
    csbmpimg
    csddsimg
    csgifimg
    csjngimg
    csjpgimg
    imgplex
    cspngimg
    cstgaimg
    null3d
    gl3d
    xmlshader
    shadermgr
    glshader_arb
    glshader_cg
    glshader_fixed
    glshader_ps1
    softshader
    vproc_std
    soft3d
  ;
  cs_plugins_static_optional = 
#    aws
#    aws2
#    csperl5
#    cspython
#    _cspace
#    dynavis_debug
    joywin
    rendstep_fatrl
    rendstep_stencil
    rendstep_stencil2
#    csvosa3dl
#    bullet
    sndsyswin
    glwin32
    glosx2d
    cgdriver2d
    ddraw2d
    sndsyscoreaudio
#    dynavis
  ;

  if $(TARGET.OS) = "WIN32" { cs_plugins_static += glwin32 ; }

  LinkStaticPlugins anvil_static :  $(cs_plugins_static)  : $(cs_plugins_static_optional) : CRYSTAL  ;

  ExternalLibs anvil_static : CRYSTAL CEGUI ;
  MsvcExternalLibrary anvil_static : "libcrystalspace_staticplugins.lib" : release ;
  MsvcExternalLibrary anvil_static : "libcrystalspace_staticplugins_d.lib" : debug ;
  
  SubVariant ;
}
